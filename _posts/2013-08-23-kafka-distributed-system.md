---
layout: post
title: "kafka分布式系统试用"
description: ""
category: kafka
published: false

---
{% include JB/setup %}

简介
====

kafka是一个由linkedin开源的分布式消息系统。既然是分布式，它就拥有高可用性，没有单点故障。同时它具有很高的吞吐量。
和许多其他的日志收集系统不同的是，它采用拉的方式进行消息的获取。而scribe等一些消息收集系统都是采用推的方式进行消息的传递。
尤其是scribe，要想对消息做一些解析的工作的话，就需要先将消息写入磁盘，然后再通过读取文件的方式将消息都到程序中进行解析。
这中间的经过了一次读文件的过程，并且这个过程单个类别是单个文件的，很容易产生性能瓶颈。而kafka系统则没有这样的担忧。
另外比较好的一点就是在github上这个系统还是一直在很活跃地更新。当然对于我来说有一点比较遗憾的就是它也是运行在jvm之上的。
使用scale语言编写。个人对java的那一系列实在是不熟悉。


实现方式和原理初步
=================

存储方式
--------

kafka采用存文件的方式对消息进行存储，左右的消息都以log的形式存储在相应的目录下面。
很多人都会潜意识的认为文件操作都会很慢，但是其实控制好了，文件操作也是可以很快的。
kafka就是一个代表。利用磁盘的顺序读和顺序写的优势性质，以及网络发送的零复制等技术。在性能方面非常优秀。


几个概念
--------

消息按照Topic进行存储，也就是说producer没发送一条消息都要有一个Topic。在Topic下可以设置分为多个PARTITION。
这些partition会被均匀地分布在各个broker上。broker就是kafka集群中的每一个实例。同时在0.8版本上增加了replica的功能。
每个partition可以设置多个replica。当某个broker出现问题的时候，replica就可以用来恢复数据。
